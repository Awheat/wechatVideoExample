var cvpHandlers={canvasClickHandler:null,videoTimeUpdateHandler:null,videoCanPlayHandler:null,windowResizeHandler:null},CanvasVideoPlayer=function(a){var i;this.options={framesPerSecond:25,hideVideo:!0,autoplay:!1,audio:!1,timelineSelector:!1};for(i in a)this.options[i]=a[i];if(this.video=document.querySelectorAll(this.options.videoSelector)[0],this.canvas=document.querySelectorAll(this.options.canvasSelector)[0],this.timeline=document.querySelectorAll(this.options.timelineSelector)[0],this.timelinePassed=document.querySelectorAll(this.options.timelineSelector+"> div")[0],!this.options.videoSelector||!this.video)return void console.error('No "videoSelector" property, or the element is not found');if(!this.options.canvasSelector||!this.canvas)return void console.error('No "canvasSelector" property, or the element is not found');if(this.options.timelineSelector&&!this.timeline)return void console.error('Element for the "timelineSelector" selector not found');if(this.options.timelineSelector&&!this.timelinePassed)return void console.error('Element for the "timelinePassed" not found');if(this.options.audio){if("string"==typeof this.options.audio){if(this.audio=document.querySelectorAll(this.options.audio)[0],!this.audio)return void console.error('Element for the "audio" not found')}else this.audio=document.createElement("audio"),this.audio.innerHTML=this.video.innerHTML,this.video.parentNode.insertBefore(this.audio,this.video),this.audio.load();var h=/iPad|iPhone|iPod/.test(navigator.platform);h&&(this.options.autoplay=!1)}this.ctx=this.canvas.getContext("2d"),this.playing=!1,this.resizeTimeoutReference=!1,this.RESIZE_TIMEOUT=1e3,this.init(),this.bind()};CanvasVideoPlayer.prototype.init=function(){this.video.load(),this.setCanvasSize(),this.options.hideVideo&&(this.video.style.display="none")},CanvasVideoPlayer.prototype.getOffset=function(a){var h,c,v;if(a)return c=a.getBoundingClientRect(),c.width||c.height||a.getClientRects().length?(v=a.ownerDocument,h=v.documentElement,{top:c.top+window.pageYOffset-h.clientTop,left:c.left+window.pageXOffset-h.clientLeft}):void 0},CanvasVideoPlayer.prototype.jumpTo=function(a){this.video.currentTime=this.video.duration*a,this.options.audio&&(this.audio.currentTime=this.audio.duration*a)},CanvasVideoPlayer.prototype.bind=function(){var a=this;this.video.addEventListener("timeupdate",cvpHandlers.videoTimeUpdateHandler=function(){a.drawFrame(),a.options.timelineSelector&&a.updateTimeline()}),this.video.addEventListener("canplaythrough",cvpHandlers.videoCanPlayHandler=function(){a.drawFrame(),vd=1}),a.options.autoplay&&a.play(),a.options.timelineSelector&&this.timeline.addEventListener("click",function(e){var h=e.clientX-a.getOffset(a.canvas).left,c=h/a.timeline.offsetWidth;a.jumpTo(c)}),this.unbind=function(){this.canvas.removeEventListener("click",cvpHandlers.canvasClickHandler),this.video.removeEventListener("timeupdate",cvpHandlers.videoTimeUpdateHandler),this.video.removeEventListener("canplay",cvpHandlers.videoCanPlayHandler),window.removeEventListener("resize",cvpHandlers.windowResizeHandler),this.options.audio&&this.audio.parentNode.removeChild(this.audio)}},CanvasVideoPlayer.prototype.updateTimeline=function(){var a=(100*this.video.currentTime/this.video.duration).toFixed(2);this.timelinePassed.style.width=a+"%"},CanvasVideoPlayer.prototype.setCanvasSize=function(){},CanvasVideoPlayer.prototype.play=function(){this.lastTime=Date.now(),this.playing=!0,this.loop(),this.options.audio&&(this.audio.currentTime=this.video.currentTime,this.audio.play())},CanvasVideoPlayer.prototype.pause=function(){this.playing=!1,this.options.audio&&this.audio.pause()},CanvasVideoPlayer.prototype.playPause=function(){this.playing&&this.pause()},CanvasVideoPlayer.prototype.loop=function(){var a=this,h=Date.now(),c=(h-this.lastTime)/1e3;c>=1/this.options.framesPerSecond&&(this.video.currentTime=this.video.currentTime+c,this.lastTime=h,this.audio&&Math.abs(this.audio.currentTime-this.video.currentTime)>.3&&(this.audio.currentTime=this.video.currentTime)),this.video.currentTime>=this.video.duration&&(this.playing=!1),this.playing?this.animationFrame=requestAnimationFrame(function(){a.loop()}):cancelAnimationFrame(this.animationFrame)};var MovieAction=!0,PageOption=[0,0],first=1;CanvasVideoPlayer.prototype.drawFrame=function(){
//   1==PageData.gender?(this.video.currentTime>=1&&1==MovieAction&&1==first&&window.location.href.toLowerCase().indexOf("szxgl.cn")<0&&(this.video.currentTime=100,first--),this.video.currentTime>=104&&1==MovieAction&&(MovieAction=!1,
//   _App.bgAudio.currentTime=0,_App.bgAudio.play(),$(".page-1 .video-masking").fadeIn(800),$(".page-1 .logo").fadeIn(800),setTimeout(function(){$(".page-1").find(".step-2-word").fadeIn()},800),setTimeout(function(){$(".page-1").find(".step-2-btn-1").fadeIn(),$(".page-1").find(".step-2-btn-2").fadeIn()},1600))):this.video.currentTime>=20&&1==MovieAction&&(_App.bgAudio.currentTime=0,_App.bgAudio.play(),$(".step-3-btn-1").fadeIn(),MovieAction=!1),
// 1==videoDisplay?this.ctx.drawImage(this.video,0,0,activeFrame.width,playHeight):this.ctx.drawImage(this.video,0,0,playWidth,activeFrame.height);
1==videoDisplay?this.ctx.drawImage(this.video,0,0,100,100):this.ctx.drawImage(this.video,0,0,100,100);

};